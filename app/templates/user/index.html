{% extends "layout.html" %}
{% block title %}Usuarios{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block content %}
<<<<<<< HEAD
<h1 style="text-align: center">Usuarios</h1>
=======


<h1>Usuarios</h1>

<form action="{{ url_for('user_filtro') }}" method="POST">
  <h3>Filtrar</h3> 
      <input name="first_name" placeholder="Nombre"/>
      <select  name="activo">
        <option value="" selected>Seleccione un estado</option>
        <option value="1">Activo</option>
        <option value="0">Bloqueado</option>
      </select>
      <input type="submit" value="Filtrar">
    </form>
    <br>
    <br>
>>>>>>> master
  <table>
    <tr>
        <th>  Email  </th>
        <th>  Nombre  </th>
        <th>  Apellido  </th>
        <th>  Contrase√±a  </th>
        <th>  Roles  </th>
        <th>  Estado  </th>
        <th>  Actions  </th>
    </tr>
<<<<<<< HEAD
  {% for user in users %}
=======
  {% for user in users.items %}
>>>>>>> master
    <tr>
      <td>{{ user.email }}</td>
      <td>{{ user.first_name }} </td>
      <td>{{ user.last_name }} </td>
      <td>{{ user.password }}</td>
      <td>
        {% for rol in user.rols %}
          {{ rol.nombre }} 
          <br>
        {% endfor %}
      <td>
        {% if user.activo==True %}
          Activo
        {% else %}
          Bloqueado
        {% endif %}
      </td>
      <td>
<<<<<<< HEAD
        <form action="{{ url_for('user_edit', user_id = user.id ) }}"  >
          <button type="submit" class="btn btn-warning mt-2 ml-2">Editar</button>
        </form>
        <br>
=======
        {% if my_user(is_authenticated(session)).check_permiso(is_authenticated(session),'user_edit') %}
        <form action="{{ url_for('user_edit', user_id = user.id ) }}"  >
          <button type="submit" class="btn btn-warning mt-2 ml-2">Editar</button>
        </form>
        {% endif %}
        <br>
        {% if my_user(is_authenticated(session)).check_permiso(is_authenticated(session),'user_delete') %}
>>>>>>> master
        <form action="{{ url_for('user_delete') }}" method="POST" enctype="multipart/form-data">
          <input type="hidden" id="user_id" name="user_id" value="{{user.id}}">
          <button type="submit" class="btn btn-danger mt-2 ml-2" >eliminar</button>
        </form>
<<<<<<< HEAD
=======
        {% endif %}
>>>>>>> master
      </td>
    </tr>
    {% endfor %}
  </table>
<<<<<<< HEAD
  <a href="{{ url_for('home') }}" class="link">Volver</a>
  <a href="{{ url_for('user_new') }}" class="link">Nuevo</a>
{% endblock %}
=======



  {% if users.has_prev %}
  <a class="link" href="{{ url_for('user_index', page_num=users.prev_num,) }}">Anterior</a>
  {% else %}
   <a style=" pointer-events: none;cursor: default;" class="link" disabled href="">Anterior</a>
 {% endif %}
  {% for page_num in users.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
     {% if page_num%}
       {% if users.page == page_num%}
         <a href="" style=" pointer-events: none;cursor: default; background-color:pink" class="link btn btn-info mb-4">{{page_num}}</a>
       {% else %}
         <a href="{{ url_for('user_index',page=page_num)}}" class="link btn btn-outline-info mb-4">{{page_num}}</a>
       {% endif %}
     {% else %}
       ...
     {% endif %}
  {% endfor %}
 {% if users.has_next %}
  <a class="link" href="{{ url_for('user_index', page=users.next_num) }}">Siguiente</a>
  {% else %}
  <a style=" pointer-events: none;cursor: default;" class="link" href="">Siguiente</a>
 {% endif %}


  <a href="{{ url_for('home') }}" class="link">Volver</a>
  <a href="{{ url_for('user_new') }}" class="link">Nuevo</a>
{% endblock %}

>>>>>>> master
