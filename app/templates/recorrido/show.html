{% extends "layout.html" %}
{% block title %}{{recorrido.nombre}}{% endblock %}
{% block head %}
  {{ super() }}
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
  crossorigin=""></script>
  <script type="module" src="/static/js/map.js" ></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.2/leaflet.draw.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>

{% endblock %}
{% block header %}
  <div>
    {{ super() }}
    <h1 id="header">{{recorrido.nombre}}</h1>
  </div>
{% endblock %}
{% block content %}
<div class="map-container">
    <input id="{{ recorrido }}" class="recorridos" type="hidden" value="{{ recorrido.coordenadas }}" >
    <input id="{{ recorrido }}" class="recorridos-nombre" type="hidden" value="{{ recorrido.nombre }}" >
    <div id="mapid" class="mapform" ></div>
    <script></script>
</div>
<div style="max-width: 30%">
    <p>
        <label>Nombre: {{ recorrido.nombre }}<label>
    </p>
    <p>
        <label>Descripcion: {{ recorrido.descripcion }}<label>
    </p>
    <p>
        <label for="estado">Estado: {{ recorrido.estado }}</label>
    </p>
    <form action="{{  url_for('recorrido_edit', id = recorrido.id ) }}"  >
        {% if my_user(is_authenticated(session)).check_permiso(is_authenticated(session),'recorrido_edit') %}
        <button type="submit" class="btn btn-warning mt-2 ml-2">Editar</button>
        {% endif %}
    </form>
        {% if my_user(is_authenticated(session)).check_permiso(is_authenticated(session),'recorrido_delete') %}
    <form action="{{ url_for('recorrido_delete') }}" method="POST" enctype="multipart/form-data">
        <input type="hidden" id="recorrido_id" name="recorrido_id" value="{{recorrido.id}}">
        <button onclick="return confirm('Â¿Esta seguro de que desea eliminar este recorrido?');" class="btn btn-danger mt-2 ml-2">Eliminar</a>
        {% endif %}
    </form>
</div>
<br>
<a href="{{ url_for('recorrido_index') }}" class="link">Volver</a>
{% endblock %}