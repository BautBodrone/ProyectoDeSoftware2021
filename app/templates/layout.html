<!DOCTYPE html>
<html lang="es">
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" type="text/css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
   
    <style>
      body, #footer, a.navbar{
        background-color: {{ configurator().get_private_bg_color() }};
        color: {{ configurator().get_private_letters_color() }};
      }
      a.link, #container, #header, .navbar, a.navbar.selected, a.navbar:hover {
        background-color: {{ configurator().get_private_accent_color() }};
        color: {{ configurator().get_private_letters_color() }};
      }
      a.navbar.selected{
        filter: brightness(1.5);
      }
      a.navbar:hover {
        filter: brightness(0.88);
      }
      a.link.selected {
        filter: brightness(1.5);
      }

    </style>
    {% block head %}
      <link rel="icon" href="/static/imgs/logo.png" type="image/x-icon" >
      <title>{% block title %}{% endblock %}</title>
    {% endblock %}
  </head>
  <body>
    <div class="header" id="header">
      {% block header %}
      <a href="{{ url_for('home') }}"><img src="/static/imgs/logo.png" alt="logo" width="100" style="position:absolute; left:5%;"></a>
      {% if is_authenticated(session) %}
        <a class="link selected" href= "{{ url_for('user_edit', user_id = my_user(is_authenticated(session)).id ) }}" style="float:right;">{{ is_authenticated(session) }}</a>
      {% endif %}
      {% endblock %}
    </div>

    <div class="navbar" id="navbar">
    {% block navbar %}
      {% if is_authenticated(session) %}
        <a href="{{ url_for('punto_index') }}" class="navbar">Puntos de Encuentro</a>
        <a href="{{ url_for('configuration_edit') }}" class="navbar">Configuracion</a>
        {% if my_user(is_authenticated(session)).check_permiso(is_authenticated(session),'user_index') %}  
          <a href="{{ url_for('rol_index') }}" class="navbar">Roles</a>
          <a href="{{ url_for('user_index') }}" class="navbar">Usuarios</a>
        {% endif %}
        <a href="{{ url_for('auth_logout') }}" class="navbar">Cerrar sesión</a>
      {% else %}
        <a href="{{ url_for('auth_login') }}" class="navbar">Iniciar sesión</a>
      {% endif %}
    {% endblock %}
    </div>
    <div class="content" id="content">
      
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <ul class=flashes>
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      {% block content %}
      {% endblock %}
    </div>
    <div id="footer">
      {% block footer %}
      <a> proyecto de software </a>
      {% endblock %}
    </div> 
    {% block scripts %}{% endblock %} 
  </body>
</html>
