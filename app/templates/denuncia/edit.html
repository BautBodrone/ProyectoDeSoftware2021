{% extends "layout.html" %}
{% block title %}Editar denuncia{% endblock %}
{% block head %}
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
  integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
  crossorigin=""></script>
  <script type="module" src="/static/js/map.js" ></script>
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>

  {{ super() }}
{% endblock %}
{% block header %}
  <div>
    {{ super() }}
    <h1 id="header">Editar denuncia</h1>
  </div>
{% endblock %}
{% block content %}
  <h1>Editar una Denuncia</h1>
  <form id="form-map" action="{{ url_for('denuncia_edit_finish') }}" method="POST">
    <input type="hidden" class="coordenadas" name="coordenadas" id="coordenadas">
    <div class="map-container">
      <div id="mapid" class="mapform" ></div>
    </div>

    <div class="form-group">
      <input type="hidden" class="form-control"  id="id" name="id" value="{{denuncia.id}}">
    </div>
    
    <p>
      <label>Titulo<label></br>
      <input name="titulo" placeholder="{{denuncia.titulo}}" value="{{denuncia.titulo}}" required/>
    </p>
    <p>
      <label for="categoria">Categoria:</label>
          <select id="categoria" name="categoria">
            <option value="cañeria_rota">Cañeria Rota</option>
            <option value="calle_inundable">Calle Inundable</option>
            <option value="calle_rota">Calle rota</option>
            <option value="otro">Otro</option>
          </select>
    </p>     
    <p>
      <label>Descripcion<label></br>
      <input name="descripcion" placeholder="{{denuncia.descripcion}}" value="{{denuncia.descripcion}}"/>
    </p>

    <p>
      <label for="estado">Estado:</label>
          <select id="estado" name="estado">
            <option value="sinConfirmar">Sin confirmar</option>
            <option value="curso">En curso</option>
            <option value="resuelta">Resuelta</option>
            <option value="cerrada">Cerrada</option>
          </select>
    </p>     

    <p>
      <label>Fecha Comienzo<label></br>
      <input type="date" name="fechaC" placeholder="{{denuncia.fechaC}}" value="{{denuncia.fechaC}}" />
    </p>
    {% if denuncia.estado == "cerrada"%}
    <p>
      <label>Fecha Fin<label></br>
      <input type="date" name="fechaF" placeholder="{{denuncia.fechaF}}" value="{{denuncia.fechaF}}" />
    </p>
    {% endif %}
    <p>
      <label>Apellido del denunciante <label></br>
      <input name="apellidoD" placeholder="{{denuncia.apellidoD}}" value="{{denuncia.apellidoD}}" />
    </p>

    <p>
      <label>Nombre del denunciante <label></br>
      <input type="nombreD" name="nombreD" placeholder="{{denuncia.nombreD}}" value="{{denuncia.nombreD}}"/>
    </p>

    <p>
      <label>Telefono<label></br>
      <input name="telefono" placeholder="{{denuncia.telefono}}" value="{{denuncia.telefono}}"/>
    </p>

    <p>
      <label>Email del denunciante<label></br>
      <input name="emailD" placeholder="{{denuncia.emailD}}" value="{{denuncia.emailD}}"/>
    </p>

    <p>
      <input type="submit" value="Editar">
      <button type="reset">Limpiar</button>
    </p>

  </form>
  <a href="{{ url_for('denuncia_index') }}" class="link">Volver</a>
{% endblock %}

