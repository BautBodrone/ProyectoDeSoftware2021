<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" type="text/css"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap5.css">
    
    <style>
      body{
        background-color: {{ configurator().get_private_bg_color() }}!important;
        color: {{ configurator().get_private_letters_color() }};
      }
      a.link{
        background-color: {{ configurator().get_private_accent_color() }};
        color: {{ configurator().get_private_letters_color() }};
      }
      #container{
        background-color: {{ configurator().get_private_accent_color() }};
      }
      #header{
        background-color: {{ configurator().get_private_accent_color() }};
        color: {{ configurator().get_private_letters_color() }}
      }
      .navbar{
        background-color: {{ configurator().get_private_accent_color() }};
        color: {{ configurator().get_private_letters_color() }}
      }
      a.link{
        background-color: {{ configurator().get_private_bg_color() }};
      }
      a.volver_link{
        background-color: {{ configurator().get_private_accent_color() }};
      }
    </style>

    {% block head %}
      <link rel="icon" href="/static/imgs/logo.png" type="image/x-icon">
      <title>{% block title %}{% endblock %}</title>
    {% endblock %}
  </head>
  <body>
    <div class="header" id="header">
      {% block header %}
      <a href="{{ url_for('home') }}"><img src="/static/imgs/logo.png" alt="logo" width="100"></a>
      {% endblock %} 
    </div>

    <div class="navbar" id="navbar">
    {% block navbar %}
      {% if is_authenticated(session) %}
        <a href="{{ url_for('puntos_index') }}" class="link">Puntos de Encuentro</a>
        <a href="{{ url_for('configuration_index') }}" class="link">Configuracion</a>
        {% if my_user(is_authenticated(session)).check_permiso(is_authenticated(session),'user_index') %}  
          <a href="{{ url_for('rol_index') }}" class="link">Roles</a>
          <a href="{{ url_for('user_index') }}" class="link">Usuarios</a>
          {% endif %}
          <a href="{{ url_for('auth_logout') }}" class="link">Cerrar sesión</a>
      {% else %}
        <a href="{{ url_for('auth_login') }}" class="link">Iniciar sesión</a>
      {% endif %}
    {% endblock %}
    </div>
    <div class="content" id="content">
      
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <ul class=flashes>
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      {% block content %}
      {% endblock %}
    </div>
    <div id="footer">
      {% block footer %}
      <a> proyecto de software </a>
      {% endblock %}
    </div> 
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap5.js"></script>
    {% block scripts %}{% endblock %} 
  </body>
</html>
